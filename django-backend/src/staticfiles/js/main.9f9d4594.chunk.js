(this["webpackJsonpimage-front"]=this["webpackJsonpimage-front"]||[]).push([[0],{62:function(e,t,a){},63:function(e,t,a){},67:function(e,t,a){},89:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(22),c=a.n(i),r=(a(62),a(63),a(32)),l=a(38),o=a.n(l),d=a(51),m=a(25),g=a(26),h=a(31),j=a(29),p=a(57),u=(a(67),a(99)),x=a(96),b=a(102),f=a(97),y=a(98),O=a(18),v=a.n(O),I=a(39),z=(a(86),a(2));function w(){return v.a.get("/api/get_eth0_ip/").then((function(e){return e.data.eth0_ip})).catch((function(e){console.log(e)}))}var N=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={files:[],isLoading:!1,isAnalyzing:!1,recentImage:null,e_hr:"",e_min:"",showMessage:!1,isMultipleimages:!1,showProcessedImage:!1,analyzedInfo:null},e.handleEhrChange=function(t){e.setState({e_hr:t.target.value})},e.handleEminChange=function(t){e.setState({e_min:t.target.value})},e.onDrop=function(t){t.length>1?e.setState({isMultipleimages:!0}):(e.setState({isLoading:!0,files:[],recentImage:null,isMultipleimages:!1}),e.loadingImage(t))},e.loadingImage=function(t){setTimeout((function(){e.setState({files:t,isLoading:!1,showProcessedImage:!1},(function(){console.log(e.state.files[0].name)}))}),1e3)},e.analyzingImage=function(){setTimeout((function(){e.setState({isAnalyzing:!1},(function(){console.log(e.state.files[0].name)}))}),1e3)},e.activateSpinner=function(){e.setState({isLoading:!0,isAnalyzing:!0,files:[]})},e.deactivateSpinner=function(){e.setState({isLoading:!1,isAnalyzing:!1})},e.handleDisabledClick=function(){e.setState({showMessage:!0})},e.sendImage=function(){e.setState({isLoading:!1,isAnalyzing:!0,files:[]});var t=new FormData;t.append("image",e.state.files[0],e.state.files[0].name),t.append("e_hr",e.state.e_hr),t.append("e_min",e.state.e_min),w().then((function(a){v.a.post("https://www.zeroexposure1905.com/api/images/",t,{headers:{accept:"application/json","content-type":"multipart/form-data"}}).then((function(t){e.getImageResults(t),console.log(t.data)})).catch((function(e){console.log("Error Message here: "+e)}))}))},e.getImageResults=function(t){w().then((function(a){v.a.get("https://www.zeroexposure1905.com/api/images/".concat(t.data.id,"/"),{headers:{accept:"application/json"}}).then((function(t){e.setState({recentImage:t,analyzedInfo:t.data.analyzed_info}),console.log(t)})).catch((function(e){console.log("Error Message here: "+e)})),e.deactivateSpinner()}))},e.showProcessedImage=Object(d.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w();case 2:t.sent,v.a.get("https://www.zeroexposure1905.com".concat(e.state.recentImage.data.processed_image),{headers:{accept:"image/png, image/jpeg"},responseType:"blob"}).then((function(t){e.getImageResults(t),console.log(t.data),e.setState({showProcessedImage:!1})})).catch((function(e){console.log("Error Message here: "+e)})),e.setState({showProcessedImage:!0});case 5:case"end":return t.stop()}}),t)}))),e.hideProcessedImage=function(){e.setState({showProcessedImage:!1})},e}return Object(g.a)(a,[{key:"render",value:function(){var e=this,t=this.state.files.map((function(e){return Object(z.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(z.jsxs)("li",{style:{margin:"auto"},children:[e.name," - ",e.size," bytes"]},e.name)})}));return Object(z.jsx)(p.a,{onDrop:this.onDrop,accept:"image/png, image/jpeg",children:function(a){var n=a.isDragActive,i=a.getRootProps,c=a.getInputProps;return Object(z.jsxs)("section",{className:"container",children:[Object(z.jsxs)("div",Object(r.a)(Object(r.a)({},i({className:"dropzone back"})),{},{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(z.jsx)("input",Object(r.a)({},c())),Object(z.jsx)("i",{className:"far fa-images mb-2 text-muted",style:{fontSize:100}}),Object(z.jsx)("p",{className:"text-muted",children:n?"Drop some images":"Drag 'n' drop some files here, or click to select files"})]})),Object(z.jsx)("aside",{children:t}),Object(z.jsx)(u.a,{children:e.state.recentImage?null:Object(z.jsxs)(s.a.Fragment,{children:[Object(z.jsxs)("div",{className:"row",style:{marginTop:"5px"},children:[Object(z.jsx)("label",{for:"exposure_hour",className:"col-sm-2 col-form-label",children:"Exposure Hour"}),Object(z.jsx)("div",{className:"col-sm-10",children:Object(z.jsx)("input",{type:"number",className:"form-control",placeholder:"Enter the expected exposure time",id:"exposure_hour",name:"e_hr",value:e.state.e_hr,onChange:e.handleEhrChange,min:"0"})})]}),Object(z.jsxs)("div",{className:"row",children:[Object(z.jsx)("label",{for:"exposure_min",className:"col-sm-2 col-form-label",children:"Exposure Minute"}),Object(z.jsx)("div",{className:"col-sm-10",children:Object(z.jsx)("input",{type:"number",className:"form-control",placeholder:"Enter the expected exposure time",id:"exposure_min",name:"e_min",value:e.state.e_min,onChange:e.handleEminChange,min:"0"})})]})]})}),e.state.files.length>0&&(""!==e.state.e_hr&&""!==e.state.e_min&&parseInt(e.state.e_hr)>=0&&parseInt(e.state.e_min)>=0&&(0!==parseInt(e.state.e_hr)||0!==parseInt(e.state.e_min))?Object(z.jsx)(x.a,{variant:"info",size:"lg",className:"mt-3",onClick:e.sendImage,children:"Analyze"}):Object(z.jsx)(x.a,{variant:"info",size:"lg",className:"mt-3",onClick:e.handleDisabledClick,children:"Analyze"})),e.state.showMessage&&(""===e.state.e_hr||""===e.state.e_min)&&Object(z.jsx)(b.a,{variant:"warning",style:{marginTop:"13px"},children:"Please fill in both 'Exposure Hour' and 'Exposure Minute' fields."}),e.state.showMessage&&0===parseInt(e.state.e_hr)&&0===parseInt(e.state.e_min)&&Object(z.jsx)(b.a,{variant:"warning",style:{marginTop:"13px"},children:"At least one of them should be 1 or greater."}),e.state.showMessage&&(parseInt(e.state.e_hr)<0||parseInt(e.state.e_min)<0)&&Object(z.jsx)(b.a,{variant:"warning",style:{marginTop:"13px"},children:"Please enter only non-negative values for 'Exposure Hour' and 'Exposure Minute'."}),e.state.isMultipleimages&&Object(z.jsx)(b.a,{variant:"warning",style:{marginTop:"13px"},children:"Please upload only one image at a time."}),e.state.isLoading&&Object(z.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(z.jsx)(f.a,{animation:"border",role:"status",style:{marginTop:"50px"}}),Object(z.jsx)("div",{style:{textAlign:"center",marginTop:"5px"},children:"Loading..."})]}),e.state.isAnalyzing&&Object(z.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(z.jsx)(f.a,{animation:"border",role:"status",style:{marginTop:"50px"}}),Object(z.jsx)("div",{style:{textAlign:"center",marginTop:"5px"},children:"Analyzing..."})]}),e.state.recentImage&&Object(z.jsxs)(s.a.Fragment,{children:[e.state.recentImage.data.analyzed.includes("Failed")&&Object(z.jsx)(b.a,{variant:"warning",style:{marginTop:"12px"},children:Object(z.jsx)("div",{className:"auto-line-break analyzed-results",children:e.state.recentImage.data.analyzed})}),!e.state.recentImage.data.analyzed.includes("Failed")&&Number(e.state.recentImage.data.analyzed)<=100?Object(z.jsx)(b.a,{variant:"primary",style:{marginTop:"12px"},children:Object(z.jsxs)("div",{className:"auto-line-break analyzed-results",children:["Ozone exposure level",Object(z.jsx)("br",{}),Object(z.jsx)("b",{children:Math.round(e.state.recentImage.data.analyzed)})," ppb"]})}):!e.state.recentImage.data.analyzed.includes("Failed")&&Object(z.jsx)(b.a,{variant:"danger",style:{marginTop:"12px"},children:Object(z.jsxs)("div",{className:"auto-line-break analyzed-results",children:["Ozone exposure level",Object(z.jsx)("br",{})," ",Object(z.jsx)("b",{children:Math.round(e.state.recentImage.data.analyzed)})," ppb"]})}),!e.state.recentImage.data.analyzed.includes("Failed")&&Object(z.jsx)("div",{className:"circular-progress-bar",style:{marginTop:"13px !important"},children:Object(z.jsx)(I.a,{value:Number(e.state.recentImage.data.analyzed),text:Number(e.state.recentImage.data.analyzed)<=100?"SAFE":"DANGER",styles:Object(I.b)({fontSize:"14px",textColor:Number(e.state.recentImage.data.analyzed)<=100?"#007bff":"#dc3545",pathColor:Number(e.state.recentImage.data.analyzed)<=100?"#007bff":"#dc3545",trailColor:"#f2f2f2"})})}),Object(z.jsx)("div",{className:"image-container",style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"20px"},children:e.state.recentImage&&Object(z.jsx)(s.a.Fragment,{children:e.state.showProcessedImage?Object(z.jsxs)(s.a.Fragment,{children:[Object(z.jsx)(x.a,{style:{marginTop:"0px",marginBottom:"30px",fontSize:"15px",width:"220px",height:"40px"},variant:"primary",size:"lg",className:"mt-3 mx-auto",onClick:e.hideProcessedImage,children:"Hide Processed Image"}),Object(z.jsx)("div",{style:{border:"2px solid #ccc",borderRadius:"4px",padding:"3px",marginTop:"0px",marginBottom:"30px"},children:Object(z.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(z.jsx)("b",{style:{color:"gray",fontStyle:"italic"},children:"Processed Data"}),Object(z.jsx)(y.a,{className:"justify-content-center",src:e.state.recentImage.data.processed_image,height:"300",alt:"File not Loaded",rounded:!0,align:"center",style:{marginTop:"0px",marginBottom:"7px"}}),Object(z.jsx)("div",{className:"analyzed-info-container",children:e.state.analyzedInfo&&Object(z.jsx)("div",{className:"analyzed-info auto-line-break",style:{marginBottom:"0px !important"},children:Object(z.jsx)("b",{style:{color:"gray",fontStyle:"italic"},children:Object(z.jsx)("p",{children:e.state.analyzedInfo})})})})]})})]}):Object(z.jsx)(x.a,{style:{marginTop:"0px",marginBottom:"30px",fontSize:"15px",width:"220px",height:"40px"},variant:"primary",size:"lg",className:"mt-3 mx-auto",onClick:e.showProcessedImage,children:"Show Processed Image"})})})]})]})}})}}]),a}(n.Component),_=a(103),S=function(e){return Object(z.jsxs)(_.a,{style:{width:"20rem"},className:"mx-auto mb-1",children:[Object(z.jsx)(_.a.Img,{variant:"top",src:e.pict}),Object(z.jsxs)(_.a.Body,{children:[Object(z.jsxs)(_.a.Title,{children:["Analyzed as",Object(z.jsx)("br",{})]}),Object(z.jsx)("div",{className:"auto-line-break analyzed-results",children:e.name})]})]})},k=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={images:[],visible:2,isLoading:!0,newLoaded:!1,status:!1},e.getImages=function(){w().then((function(t){v.a.get("https://www.zeroexposure1905.com/api/images/",{headers:{accept:"application/json"}}).then((function(t){e.setState({images:t.data,status:!0}),console.log(t)})),e.setState({isLoading:!1})}))},e.handleVisible=function(){var t=e.state.visible+2;e.setState({newLoaded:!0}),setTimeout((function(){e.setState({visible:t,newLoaded:!1})}),300)},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){setTimeout(this.getImages,1e3)}},{key:"render",value:function(){var e=this.state.images.slice(0,this.state.visible).map((function(e){return Object(z.jsx)(S,{pict:e.processed_image,name:e.analyzed},e.id)}));return Object(z.jsxs)("div",{children:[Object(z.jsx)("h3",{children:" Analysis of images"}),0===this.state.images.length&&this.state.status&&Object(z.jsx)("h3",{children:"No images Analyzed"}),this.state.isLoading?Object(z.jsx)(f.a,{animation:"border",role:"status"}):Object(z.jsxs)(s.a.Fragment,{children:[e,this.state.newLoaded&&Object(z.jsx)(f.a,{animation:"border",role:"status"}),Object(z.jsx)("br",{}),this.state.images.length>this.state.visible&&this.state.images.length>2&&Object(z.jsx)(x.a,{clasName:"mb-5",variant:"primary",size:"lg",onClick:this.handleVisible,style:{marginBottom:"20px"},children:"Load more"}),this.state.images.length<=this.state.visible&&this.state.images.length>0&&Object(z.jsx)("p",{className:"mb-3",children:"No more images to load"})]})]})}}]),a}(n.Component),T=a(101),C=a(100),A=(a(89),function(){return Object(z.jsxs)(T.a,{bg:"dark",variant:"dark",className:"mb-3",children:[Object(z.jsx)(T.a.Brand,{href:"/home",children:"RGB Analyzer"}),Object(z.jsxs)(C.a,{className:"me-auto",children:[Object(z.jsx)(C.a.Link,{href:"/home",children:"Home"}),Object(z.jsx)(C.a.Link,{href:"/list",children:"Analysis History"})]}),Object(z.jsx)("div",{className:"license",children:Object(z.jsx)("p",{children:"\xa9 2023 jaycho@korea.ac.kr. All rights reserved."})})]})}),L=a(55),P=a(7);var M=function(){return Object(z.jsxs)(L.a,{children:[Object(z.jsx)(A,{}),Object(z.jsx)("div",{className:"App",children:Object(z.jsxs)(P.c,{children:[Object(z.jsx)(P.a,{exact:!0,path:"/main",component:N}),Object(z.jsx)(P.a,{exact:!0,path:"/list",component:k}),Object(z.jsx)(P.a,{exact:!0,path:"*",component:N})]})})]})},D=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,104)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),i(e),c(e)}))};c.a.render(Object(z.jsx)(s.a.StrictMode,{children:Object(z.jsx)(M,{})}),document.getElementById("root")),D()}},[[93,1,2]]]);
//# sourceMappingURL=main.9f9d4594.chunk.js.map